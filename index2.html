<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Invoice Calculation</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">

    <script src="resources/jquery-3.3.1.slim.min.js"></script>
    <script src="resources/popper.min.js"></script>
    <link rel="stylesheet" href="resources/bootstrap.min.css">
    <script src="resources/bootstrap.min.js"></script>

    <style>
        @media print {
            table td:last-child {
                display: none
            }

            table th:last-child {
                display: none
            }
        }

        .vertical-spacing {
            margin: 3px 0px 3px 0px;
        }

        img {
            max-width: 100%;
        }

        .table thead th,
        .table td {
            border-left: 1px solid #dee2e6;
            border-bottom: 1px solid #dee2e6;
        }

        .table thead th:last-child,
        .table td:last-child {
            border-right: 1px solid #dee2e6;
        }

        .table td {
            border-bottom: 1px solid #dee2e6;
        }

        .table td.noBorder {
            border-bottom: none;
            border-top: none;
        }

        .table td.onlyBottomBorder {
            border-top: none;
            border-bottom: 1px solid #dee2e6;
        }


        table {
            table-layout: fixed;
            word-wrap: break-word;
        }

        .line {
            width: 6%;
        }

        .itemNumber {
            min-width: 12%;
        }

        .uom {
            min-width: 10%;
        }

        .quantity {
            min-width: 10%;
        }

        .unitPrice {
            min-width: 12%;
        }

        .disc {
            min-width: 10%;
        }

        .discAmount {
            min-width: 12%;
        }

        .vat {
            min-width: 10%;
        }

        .vatAmount {
            min-width: 12%;
        }

        .totalAmount {
            min-width: 12%;
        }

        table input {
            width: 100%;
        }

        .middleContainer span.vertical-spacing.col-md-6 {
            line-height: 30px;
        }

        .btn-default {
            background: lightblue;
        }

        .addIcon {
            width: 25px;
        }

        .deleteIcon {
            width: 25px;
            margin-left: 10px;
        }

        .lastRow input {
            margin: 5px;
        }

        .lastRow {
            margin-top: 15px;
        }
    </style>

</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <img alt="Bootstrap Image Preview" src="resources/images/1.PNG">
            </div>
            <div class="col-md-4">
                <img alt="Bootstrap Image Preview" src="resources/images/2.PNG">
            </div>
            <div class="col-md-4">
                <img alt="Bootstrap Image Preview" src="resources/images/3.PNG">
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="row">
                    <span class="vertical-spacing col-md-6">Customer No :</span>
                    <input type="text" class="vertical-spacing col-md-6">
                </div>
                <div class="row">
                    <span class="vertical-spacing col-md-6">Customer Vat No :</span>
                    <input type="text" class="vertical-spacing col-md-6">
                </div>
                <div class="row">
                    <span class="vertical-spacing col-md-6">Customer Name :</span>
                    <input type="text" class="vertical-spacing col-md-6">
                </div>
                <div class="row">
                    <span class="vertical-spacing col-md-6">Customer P.O. No. :</span>
                    <input type="text" class="vertical-spacing col-md-6">
                </div>
            </div>
            <div class="col-md-4 middleContainer">
                <div class="row">
                    <span class="vertical-spacing col-md-6">:رقم العميل</span>
                    <span class="vertical-spacing col-md-6">Page :</span>
                </div>
                <div class="row">
                    <span class="vertical-spacing col-md-6">:رقم ضريبة القيمة المضافة</span>
                    <span class="vertical-spacing col-md-6">Invoice Date (G) :</span>
                </div>
                <div class="row">
                    <span class="vertical-spacing col-md-6">:اسم الزبون</span>
                </div>
                <div class="row">
                    <span class="vertical-spacing col-md-6">:PO العملاء. لا</span>
                </div>
            </div>
            <div class="col-md-4">
                <div class="row">
                    <input type="text" class="vertical-spacing col-md-6">
                    <span class="vertical-spacing col-md-6">:صفحة</span>
                </div>
                <div class="row">
                    <input type="text" class="vertical-spacing col-md-6">
                    <span class="vertical-spacing col-md-6">:تاريخ الفاتورة</span>
                </div>


            </div>
        </div>
        <table class="table" id="dataTable">
            <thead>
                <tr>
                    <th class="line"> Line # </th>
                    <th> Item Number </th>
                    <th> Description </th>
                    <th> UOM </th>
                    <th> Quantity </th>
                    <th> Unit Price </th>
                    <th> Disc % </th>
                    <th> Disc Amount </th>
                    <th> Vat % </th>
                    <th> Vat Amount </th>
                    <th> Total Amount </th>
                    <th> Action </th>
                </tr>
            </thead>
            <tbody>
                <tr class="dataRow">
                    <td> <span class="count">1</span> </td>
                    <td> <input type="text" /> </td>
                    <td> <input type="text" /> </td>
                    <td> <input type="text" /> </td>
                    <td><input type="text" class="quantity" /></td>
                    <td><input type="text" class="unitPrice" /></td>
                    <td> <input type="text" class="disc" /> </td>
                    <td> <input type="text" class="discAmount" /> </td>
                    <td> <input type="text" class="vat" /> </td>
                    <td> <input type="text" class="vatAmount" /> </td>
                    <td> <input type="text" class="totalAmount" /> </td>
                    <td> <img class="addIcon" src="resources/images/add.png"><img class="deleteIcon"
                            src="resources/images/delete.png"> </td>
                </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="col-md-6"></div>
            <div class="col-md-5">
                <div class="row">
                    <span class="col-md-6">Net Before VAT</span>
                    <input id="grandNetBeforeVat" type="text" class="netBeforeVat col-md-6" />
                </div>
                <div class="row">
                    <span class="col-md-6">VAT Value</span>
                    <input id="grandVatValue" type="text" class="vatValue col-md-6" />
                </div>
                <div class="row">
                    <span class="col-md-6">Net After VAT</span>
                    <input id="grandNetAfterVat" type="text" class="netAfterVat col-md-6" />
                </div>
                <div class="row">
                    <span class="col-md-6">Discount</span>
                    <input id="grandDiscount" type="text" class="discount col-md-6" />
                </div>
                <div class="row">
                    <span class="col-md-6">Grand Total</span>
                    <input id="grandTotal" type="text" class="grandTotal col-md-6" />
                </div>
            </div>
            <div class="col-md-1"></div>
        </div>
        <div class="row lastRow">
            <div class="col-md-6">
                <span class="col-md-6">Received by:</span>
                <input class="col-md-6" type="text" />
            </div>
            <div class="col-md-6">
                <span class="col-md-6">Name:</span>
                <input class="col-md-6" type="text" />
            </div>
            <div class="col-md-6">
                <span class="col-md-6">Signature:</span>
                <input class="col-md-6" type="text" />
            </div>
            <div class="col-md-6">
                <span class="col-md-6">Issued By:</span>
                <input class="col-md-6" type="text" />
            </div>
        </div>
    </div>


</body>
<script>
    $(document).ready(function () {
        $(".addIcon").click(function () {
            var currentRow = $(this).closest('tr');
            var newRow = currentRow.clone(true, true);
            newRow.find(':text').val('');
            newRow.insertAfter(currentRow);
            updateSno();
        });

        $(".deleteIcon").click(function () {
            if ($("#dataTable tr").length > 2) {
                $(this).closest('tr').remove();
                updateSno();
                calculateInvoice();
            } else {
                alert('Hey!!! Do you want to delete even single row ?');
            }
        });



        $(".quantity,.unitPrice,.disc,.discAmount,.vat,.vatAmount").keyup(function () {
            calculateInvoice();
        });
    });

    function updateSno() {
        $("#dataTable").find(".count").each(function (i) {
            $(this).text(i + 1);
        });
    }

    function calculateInvoice() {
        let totalAmount = 0;
        let grandDiscount = 0;
        let grandNetBeforeVat = 0;
        let grandVatValue = 0;
        let grandNetAfterVat = 0;
        $("#dataTable tbody tr").each(function (i) {
            let curRow = $(this);
            let quantity = parseInt(curRow.find(".quantity").val()) | 0;
            let unitPrice = parseInt(curRow.find(".unitPrice").val()) | 0;
            let disc = parseInt(curRow.find(".disc").val()) | 0;
            let vat = parseInt(curRow.find(".vat").val()) | 0;
            let tempRowAmount = quantity * unitPrice;
            let discAmount = tempRowAmount * (disc / 100);
            let vatAmount = tempRowAmount * (vat / 100);
            let curNetBeforeVat = tempRowAmount;
            let curNetAfterVat = tempRowAmount + vatAmount;
            let curRowAmount = tempRowAmount - discAmount + vatAmount;
            curRow.find(".discAmount").val(discAmount);
            curRow.find(".vatAmount").val(vatAmount);
            curRow.find(".totalAmount").val(curRowAmount);
            totalAmount += curRowAmount;
            grandDiscount += discAmount;
            grandVatValue += vatAmount;
            grandNetBeforeVat += curNetBeforeVat;
            grandNetAfterVat += curNetAfterVat;
        });
        $("#grandTotal").val(totalAmount);
        $("#grandDiscount").val(grandDiscount);
        $("#grandVatValue").val(grandVatValue);
        $("#grandNetBeforeVat").val(grandNetBeforeVat);
        $("#grandNetAfterVat").val(grandNetAfterVat);
    }
</script>

</html>